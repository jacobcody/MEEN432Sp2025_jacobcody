Howdy! To begin, download the `Proj3_week3_init.m`, `Proj3_week3_main.m`, `Proj3_week3_runsim.m`, and `Proj3_week3_sim.slx` files. These are necessary to simulate both the highway and urban drive cycles and to obtain the plots and energy data. Also make sure to include `hwycol.txt` and `uddscol.txt`, which contain the EPA drive cycle data that our electric vehicle model is attempting to follow. Run the `Proj3_week3_main.m` script to generate the simulation plots and energy results.

This week’s model includes a battery system with regenerative braking. The battery voltage is computed using open circuit voltage (OCV), internal resistance, and the configuration of battery cells in series and parallel. These properties are defined through lookup tables and constants in the initialization file. Battery SOC and voltage vary based on vehicle behavior, speed, and load. Regenerative braking is applied when torque becomes negative, capturing energy back into the battery and reducing net energy usage.

The simulation outputs show velocity tracking for each drive cycle, with the simulated velocity plotted in blue, the desired cycle velocity in red, and ±3 mph error bands in black. A separate bar chart compares the total net energy used between the highway and urban EPA cycles. This net energy is the result of subtracting the regenerated energy from the total power output, where power is calculated by multiplying motor torque by angular velocity over time. The area under the power curve gives total energy, and that final value is what’s displayed on the bar chart for both cycles.

Run the model to confirm that regenerative braking has a greater effect during stop-and-go urban driving compared to steady-speed highway driving. All energy and velocity plots will be saved and displayed automatically.
